<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>~/temp/tcl/new/tcl.otl.html</title>
<meta name="Generator" content="Vim/7.2">
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
</head>
<body bgcolor="#ffffff" text="#000000"><font face="monospace">
<font color="#006400">===================== Obsah kurzu =============================</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;1. O¹etøení chyb ve skriptech</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;2. Smyèka událostí</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;3. Dynamická tvorba kódu</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;4. Oblast platnosti promìnných</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;5. Regulární výrazy</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;6. Práce se sockety</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;7. Informace poskytované VM TCL</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;8. Trasování promìnných</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;9. Trasování programu</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;10. Vytváøení procesù</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;11. Multithreading</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;12. Jmenné prostory</font><br>
<br>
<br>
<br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">===================== 1. O¹etøení chyb ========================</font><br>
<br>
<font color="#006400">O¹etøení chyb</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pøíkaz &quot;error msg&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pøíkaz &quot;catch script&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pøíkaz &quot;catch script promìnná&quot;</font><br>
<br>
<font color="#006400">Pøíkaz &quot;error msg&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Vypí¹e zprávu na standardní výstup</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Ukonèí bìh procedury (pokud je pou¾it v proceduøe)</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Lze odchytit pomocí pøíkazu &quot;catch&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Demonstraèní pøíklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- procedura pro výpoèet podílu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pokud by mìlo dojít k dìlení nulou, vypí¹e se chyba</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc div {a b} {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if {$b==0} {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error &quot;divide by zero&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return [expr $a/$b]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% div 4 2</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% div 4 0</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;divide by zero</font><br>
<br>
<font color="#006400">Pøíkaz &quot;catch script&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Spoustí skript pøedaný v prvním argumentu pøíkazu</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Zachycuje v¹echny výjimeèné stavy</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Vrací 0 v pøípadì, ¾e je v¹e ok</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- TCL_OK = 0</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Vrací jinou hodnotu v pøípadì chyby</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- TCL_ERROR = 1</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- TCL_RETURN = 2</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- TCL_BREAK = 3</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- TCL_CONTINUE = 4</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Demonstraèní pøíklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vyu¾ití døíve definované procedury &quot;div&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% catch {div 4 2}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% catch {div 4 0}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% catch {set result [div 4 2]}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% puts $result</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% catch {set result [div 4 0]}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% puts $result</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 // pùvodní hodnota!</font><br>
<br>
<font color="#006400">Pøíkaz &quot;catch script promìnná&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Podobná funkcionalita, jako v pøípadì &quot;catch script&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Promìnná se nastaví na chybovou hodnotu</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Zjednodu¹í se nìkteré programové konstrukce</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Demonstraèní pøíklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- otevøe soubor pro zápis s testem, zda je v¹e ok</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if { [catch {open $fileName w} fid] } {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts stderr &quot;Could not open $fileName for writing\n$fid&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit 1</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 2. Smyèka událostí&nbsp;&nbsp; ======================</font><br>
<br>
<font color="#006400">Smyèka událostí</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Event loop</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Interní programová smyèka spravovaná VM TCL</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pou¾ívána pro</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Internì pou¾ita v knihovnì Tk</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Tvorbu GUI (implicitnì pøi pou¾ití &quot;wish&quot; apod.)</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Práci se sockety</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Práci s èasovaèi (timery)</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pozdìji si uká¾eme práci se sockety</font><br>
<br>
<font color="#006400">Vstup do smyèky událostí</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* vwait promìnná</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Internì testuje hodnotu promìnné</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Pokud je promìnná zmìnìna, smyèka se ukonèí</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- mnohem lep¹í, ne¾ se sna¾it o pou¾ití return èi exit</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;co¾ ne v¾dy funguje</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Musí se jednat o globální promìnnou</font><br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 3. Dynamická tvorba kódu ==================</font><br>
<br>
<font color="#006400">Dynamická tvorba kódu</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Tcl je v porovnání s podobnými jazyky velmi dynamický skriptovací jazyk</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vìt¹ina pøíkazù se vyhodnocuje a¾ pøi bìhu programu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- neprovádí se mezipøeklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíkazy i jejich parametry jsou chápány jako øetìzce</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- naproti tomu Perl, Python: pøeklad do mezikódu</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- i v tìchto jazycích v¹ak existuje podpora pro eval()</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* základ dynamické tvorby kódu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíkaz je mo¾né ulo¾it do promìnné</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- následnì je mo¾né tuto promìnnou &quot;spustit&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* jednoduchý pøíklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- ulo¾ení pøíkazu do promìnné &quot;a&quot;</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set a llength</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llength</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% $a {1 2 3}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- ulo¾ení pøíkazu do dvojice promìnných &quot;a&quot; a &quot;b&quot;</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set a lle</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lle</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set b ngth</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ngth</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% # dvojice promennych ve forme parametru</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% puts $a$b</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;llength</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% # dvojice promennych ve forme prikazu</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% $a$b {1 2 3}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* pøi zápisu pøíkazù je mo¾né vyu¾ívat interpolaci (substituci)</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* a dal¹í pøíkazy vlo¾ené do [] nebo naopak do {}</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Tcl nejprve vyhodnotí v¹e uvnitø [] a posléze výsledek pova¾uje za pøíkaz</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pou¾ití substituce []</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% [string range &quot;Xllen&quot; 1 end]gth {1 2 3}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* pro slo¾itìj¹í konstrukce se pou¾ívá pøíkaz eval</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíklad pou¾ití pøíkazu eval</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% eval &quot;set foo 10&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% # zavorky {} zabranuji vyhodnoceni</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set myscript {puts $foo}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts $foo</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% eval $myscript</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* eval pracuje následovnì:</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- nejprve spojí své parametry do jediného seznamu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vyhodnocí parametr jako pøíkaz</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vrátí výsledek tohoto pøíkazu</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* pozor na spojování parametrù do jediného seznamu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíklad s chybou</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set a {puts &quot;Procedura a&quot;}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;Procedura a&quot;</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set b {puts &quot;Procedura b&quot;}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;Procedura b&quot;</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% # vyhodnocení procedury A</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% eval $a</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Procedura a</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% # vyhodnocení procedury B</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% eval $b</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Procedura b</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% # zde ov¹em dojde k chybì</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% eval $a $b</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bad argument &quot;Procedura b&quot;: should be &quot;nonewline&quot;</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vyu¾ití spojení parametrù do seznamu</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set print {puts}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% eval $print</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrong # args: should be &quot;puts ?-nonewline? ?channelId? string&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% eval $print 10</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* vytvoøení nového typu programové smyèky</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- procedura s dvojicí parametrù: poètem opakování a skriptem</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc repeat {count script} {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while {[incr count -1] &gt;= 0} {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval $script</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- nyní proceduru vyzkou¹íme</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% repeat 6 {puts Hello}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- slo¾itìj¹í pøíklad</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% repeat 6 {puts [expr 1+2]}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* pøístup k promìnným ze skriptù vyhodnocovaných pomocí eval</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vytvoøení globální promìnné</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set x 10</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% puts x 10</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- globální promìnná je viditelná ze skriptu v eval</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% eval {puts $x}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</font><br>
<br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 4. Oblast platnosti promìnných&nbsp;&nbsp;===========</font><br>
<br>
<font color="#006400">Oblast platnosti promìnných</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* TCL vyhodnocuje oblast viditelnosti promìnných</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vázané na proceduru</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vázané na jmenný prostor</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- globální promìnné</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pøíkaz &quot;global&quot;</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- promìnná s lokální platností (v proceduøe) bude</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odkazovat na globální promìnnou tohoto jména</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pøíkaz &quot;upvar&quot;</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- navá¾e jméno promìnné na promìnnou s jinou</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oblastí platnosti</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- upvar otherVar myVar</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- myVar bude referencí na otherVar</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- upvar otherVar1 myVar1 otherVar2 myVar2 ...</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- myVar1 bude referencí na otherVar1</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- myVar2 bude referencí na otherVar2</font><br>
<font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- myVarN bude referencí na otherVarN</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- upvar level otherVar myVar</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- doká¾e odkazovat na promìnnou v rámci zásobníku volání</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(o N úrovní vý¹e od souèasné pozice smìrem nahoru)</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- upvar #level otherVar myVar</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- doká¾e odkazovat na promìnnou v rámci zásobníku volání</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(o N úrovní ní¾e od globální úrovnì smìrem dolù)</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Vyu¾ití pøíkazu &quot;info&quot; pro test na existenci promìnné</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíkaz &quot;info exists promìnná&quot; vrací 1/0 podle toho</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zda promìnná existuje</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc add {prom hodnota} {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upvar $prom p</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if { [info exists p] } {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;incr p $hodnota</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set p $hodnota</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 5. Regulární výrazy&nbsp;&nbsp;&nbsp;&nbsp; ===================</font><br>
<br>
<font color="#006400">Regulární výrazy v TCL</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Jedna z mo¾ností zpracování øetìzcù a získávání informací</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ulo¾ených v tìchto øetìzcích</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Dva typy regulárních výrazù</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- glob matching (&quot;globbing&quot;)</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- &quot;skuteèné&quot; regulární výrazy</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Glob matching</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- odvozeno od zástupných znakù pou¾ívaných v shellu (Bash...)</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pou¾íván v TCL:</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíkaz lsearch</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíkaz string match</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíkaz glob</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- kromì bì¾ných znakù se pou¾ívají speciální znaky:</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;*&quot;&nbsp;&nbsp; zastupuje sekvenci libovolných znakù</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;?&quot;&nbsp;&nbsp; zastupuje jeden libovolný znak</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;[]&quot;&nbsp;&nbsp;zastupuje libovolný znak v závorkách</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;[-]&quot; zastupuje znak ze zadaného rozsahu, pø. A-Z, 0-9</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Demonstraèní pøíklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pou¾ití pøíkazu glob</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% glob t*</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tzdata_issue</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tomcat</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test-machines.odt</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcl</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set seznam [glob t*]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% foreach prvek $seznam {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts $prvek</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tzdata_issue</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tomcat</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test-machines.odt</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcl</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Demonstraèní pøíklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pou¾ití pøíkazu string match</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set x &quot;foo&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foo</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% string match f* $x</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% string match f? $x</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% string match f?? $x</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# pozor na speciální význam []!</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% string match [a-z]* $x</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invalid command name &quot;a-z&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% string match &quot;[a-z]*&quot; $x</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invalid command name &quot;a-z&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# toto u¾ je lep¹í</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% string match {[a-z]*} $x</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* &quot;Plnohodnotné&quot; regulární výrazy</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíkaz regexp</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- znaky se speciálním významem</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- kvalifikátory</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- atomy</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- znaky pro zaèátek a konec øádku</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- výrazy v []</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- tøídy znakù</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- speciální znaky</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Souèásti regulárních výrazù</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- kvalifikátory</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp; sekvence 0..n atomù</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&nbsp;&nbsp;&nbsp;&nbsp; sekvence 1..n atomù</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?&nbsp;&nbsp;&nbsp;&nbsp; ¾ádný nebo jeden atom</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{m}&nbsp;&nbsp; v závorce je zapsán pøesný poèet atomù</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{m,}&nbsp;&nbsp;v závorce je zapsán minimální poèet atomù</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{m,n} v závorce je minimální a maximální poèet atomù</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- atomy</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;&nbsp;konkrétní znak</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;() prázdný øetìzec</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;jediný znak</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\X øídicí znak èi znak se zadaným kódem</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(xxx) èást výrazu, k ní¾ lze pozdìji pøistupovat (podle indexu)</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- znaky pro zaèátek a konec øádku</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^ nahrazuje zaèátek øádku</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ nahrazuje konec øádku</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- výrazy v []</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lze zde zapsat mno¾inu znakù</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pøi rozdìlení znakù pomocí - se urèuje rozsah a-z, 5-7 atd.</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^ negace - v¹echny znaky, které NEodpovídají dal¹ímu výrazu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- tøídy znakù</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vnìj¹í závorky [] zmìní tøídu znakù na mno¾inu</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[:alpha:]]&nbsp;&nbsp;písmeno</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[:upper:]]&nbsp;&nbsp;velké písmeno</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[:lower:]]&nbsp;&nbsp;malé písmeno</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[:digit:]]&nbsp;&nbsp;èíslice</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[:xdigit:]] hexadecimální èíslice</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[:alnum:]]&nbsp;&nbsp;písmeno èi èíslice</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[:space:]]&nbsp;&nbsp;znak, který se vytiskne jako mezera</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[:graph:]]&nbsp;&nbsp;znak, který má tisknutelnou podobu</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[:cntrl:]]&nbsp;&nbsp;øídicí znak</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- speciální (øídicí) znaky</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert (bell)</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;backspace</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mù¾e se pou¾ít namísto \\ (èitelnìj¹í)</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\e&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;znak ESCape</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nový øádek</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;návrat kurzoru</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tab</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u1234&nbsp;&nbsp;znak se zadaným Unikódem</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vybrané tøídy znakù zapsané zkrácenou formou</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\d [[:digit:]]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\s [[:space:]]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\w [[:alnum:]_]&nbsp;&nbsp;jako \d a _</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\D [^[:digit:]]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\S [^[:space:]]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\W [^[:alnum:]_] negace \W</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pøíklady regulárních výrazù</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- regulární výraz pro IPv4 adresu (nepøesný!)</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- znak \ zabraòuje spu¹tìní &quot;pøíkazu&quot; v []</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;(\[0-9]{1,3})\.(\[0-9]{1,3})\.(\[0-9]{1,3})\.(\[0-9]{1,3})&quot;</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- regulární výraz akceptující reálná èísla</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- zde je regulární výraz umístìný v {}, tudí¾ se neuvádí \ pøed []</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{[-+]?([0-9]+\.?[0-9]*|\.[0-9]+)([eE][-+]?[0-8]+)?}</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pou¾ití pøíkazu regexp</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- regexp reg_výraz øetìzec</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vrací 0/1 podle toho, zda se v øetìzci</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nachází vzor z regulárního výrazu</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp {[a-z]} xyzzy</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp {[a-z]} 12345</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vyu¾ití tøíd znakù v regulárních výrazech</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp {[[:alpha:]]} xyzzy</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp {[[:upper:]]} xyzzy</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp {[[:lower:]]} xyzzy</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp {[[:alpha:]]} áý¾øè¹</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- regexp volby reg_výraz øetìzec</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøíkaz regexp lze zavolat s rùznými volbami</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- v nìkterých pøípadech je nutné volby ukonèit pomocí --</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp -all {[a-z]} xyzzy</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp -inline {[a-z]} xyzzy</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp -inline -all {[a-z]} xyzzy</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x y z z y</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- regexp reg_výraz øetìzec promìnná</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% regexp {[a-z]} xyzzy vysledek</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- regexp reg_výraz øetìzec promìnná prom1 ... promN</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set str 66.70.7.154</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;regexp &quot;(\[0-9]{1,3})\.(\[0-9]{1,3})\.(\[0-9]{1,3})\.(\[0-9]{1,3})&quot; $str all first second third fourth</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;$all \n $first \n $second \n $third \n $fourth \n&quot;</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- regexp a regsub</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set sample &quot;Where there is a will, There is a way.&quot;</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Match the first substring with lowercase letters only</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set result [regexp {[a-z]+} $sample match]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;Result: $result match: $match&quot;</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Match the first two words, the first one allows uppercase</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set result [regexp {([A-Za-z]+) +([a-z]+)} $sample match sub1 sub2 ]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;Result: $result Match: $match 1: $sub1 2: $sub2&quot;</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Replace a word</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;regsub &quot;way&quot; $sample &quot;lawsuit&quot; sample2</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;New: $sample2&quot;</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Use the -all option to count the number of &quot;words&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;Number of words: [regexp -all {[^ ]+} $sample]&quot;</font><br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 6. Práce se sockety&nbsp;&nbsp;&nbsp;&nbsp; ===================</font><br>
<br>
<font color="#006400">* Socket</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- vytvoøený operaèním systémem pøi nazávání pøipojení</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- procesy spolu mohou komunikovat stylem</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- peer to peer</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- client - server</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- jeden server mù¾e obsluhovat více klientù</font><br>
<br>
<font color="#006400">* Práce se sockety</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- jednoduchý echo server (typický pøíklad)</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- vyu¾ívá následující pøíkazy</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;socket</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fconfigure</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileevent</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vwait</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- v TCK je obsluha øe¹ená pøes callback funkce</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% set sock [socket -server callbackFunkce $port]</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- callBack funkce je zavolána pøi ka¾dém vytvoøení pøipojení</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- aby to fungovalo korektnì, musí se skript dostat do smyèky událostí</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- event loop</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- dále se (pro echo server) nastaví re¾im vyrovnávací pamìti,</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aby se buffer vyprázdnil pro ka¾dou øádku (jinak by se echo mohlo</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;poslat a¾ na konci spojení nebo pøi pøeplnìní bufferu)</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% fconfigure $sock -buffering line</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- registrace callback funkce zavolané po pøijetí dat</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% fileevent $sock readable [list callbackFunkce2 $sock]</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- list xxx yyy je pouzit pro konstrukci volani callback funkce</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- test na pøíznak konce souboru</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% eof $sock</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;- naètení øádku se zachycením chyb</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% catch {gets file line}</font><br>
<br>
<br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 7. Informace poskytované VM TCL ===========</font><br>
<br>
<font color="#006400">Informace poskytované VM TCL</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* pøíkaz &quot;info&quot;</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- je vyhodnocován za bìhu skriptu</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* informace o interpretru</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- lze získat jeho verzi</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info tclversion</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.5</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* informace o promìnných</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- info exists promenna</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set a foo</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info exists a</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;info exists b</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* globální promìnné</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- info globals</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- info globals glob_výraz</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* informace o pøíkazech</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- info commands</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...........</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- info commands p*</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pwd pid proc package puts</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- info commands l*</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list lassign lrange lsearch lappend llength linsert lreplace</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lreverse lset lrepeat load lindex lsort</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* získání informací o procedurách</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- info proc procname</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- info args procname</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- info body procname</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Demonstraèní pøíklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vytvoøení testovací procedury</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc plus{x y} {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[expr $x+$y]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- získání základních informací o proceduøe</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% info proc plus</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plus</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% info args plus</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x y</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;% info body plus</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[expr $x+$y]</font><br>
<br>
<br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 8. Trasování promìnných ===================</font><br>
<font color="#006400">Trasování promìnných</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* pøíkaz &quot;trace&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* trace add variable promìnná událost callbackFunkce</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- událost: read write</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* trace info variable promìnná</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* trace remove variable promìnná událost callbackFunkce</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* trace variable ...</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* trace vdelete ...</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* trace vinfo promìnná</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Demonstraèní pøíklad</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- trasování zápisu do promìnné x</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace add variable x write tisk_write_x</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc tisk_write_x args {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global x</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;zapis hodnoty $x do promenne x&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- zru¹ení trasování zápisu do promìnné x</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace remove variable x write tisk_write_x</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- výpis v¹ech argumentù pøedaných do trasovací funkce</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc tisk_write_x args {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#puts &quot;zapis hodnoty $x do promenne x&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach arg $args {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;tisk_write_x: $arg&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- výpis v¹ech callback funkcí navázaných na promìnnou</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace info variable x</font><br>
<br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 9. Trasování programu&nbsp;&nbsp; ===================</font><br>
<font color="#006400">Trasování programu</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* opìt se pou¾ívá pøíkaz &quot;trace&quot;</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* trace add execution ...</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* trace add command ...</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Demonstraèní pøíklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- trasování vstupu a ukonèení procedury test_proc</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc test_proc {x y} { return [expr $x+$y]}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace add execution test_proc enter test_proc_enter</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace add execution test_proc leave test_proc_leave</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc test_proc_enter args { puts &quot;test_proc enter&quot; }</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc test_proc_leave args { puts &quot;test_proc leave&quot; }</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc test_proc_enter args {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach arg $args {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;test_proc_enter: $arg&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc test_proc_leave args {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach arg $args {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;test_proc_leave: $arg&quot;</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace info execution test_proc</font><br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 10. Vytváøení procesù&nbsp;&nbsp; ===================</font><br>
<font color="#006400">Spu¹tìní nového procesu</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* exec</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- exec ?switches? arg ?arg ...?</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt; value</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pøesmìrování hodnoty na standardní vstup</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; filename</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pøesmìrování standardního výstupu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt; filename</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pøesmìrování standardního výstupu, pøipojení na konec souboru</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&gt; filename</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pøesmìrování chybového výstupu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&gt;&gt; filename</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pøesmìrování chybového výstupu, pøipojení na konec souboru</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- exec ?switches? arg ?arg ...? &amp;</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spu¹tìní úlohy na pozadí</font><br>
<br>
<br>
<br>
<font color="#006400">Named pipes</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Jedna z mo¾ností vytvoøení komunikaèního kanálu mezi procesy</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- výhoda: práce s named pipes stejná jako u souborù</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- nevýhoda: jen na nìkterých OS, omezení pøi vzdálené komunikaci</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Vytvoøení v shellu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ mkfifo foo</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Skript, který reaguje na ka¾dý zápis do roury</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set fifo [open &quot;foo&quot; {RDWR NONBLOCK}]</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fconfigure $fifo -blocking 1</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc read_fifo {} {</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;global fifo</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gets $fifo x</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts &quot;x is $x&quot;</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileevent $fifo readable read_fifo</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Otestování funkènosti</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ echo &quot;qwerty&quot; &gt; foo</font><br>
<br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 11. Multithreading&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;===================</font><br>
<font color="#006400">Multithreading</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Import balíèku s podporou multithreadingu</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;package require Thread</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pøíkazy v balíèku Thread</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::create ?skript?</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vrací identifikátor nového vlákna</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::wait</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- vstup vlákna do smyèky událostí</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pou¾íváno pøi thread:create se zadaným skriptem!</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- musí být a¾ na konci skriptu</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- jen tak lze vláknu poslat nový skript pomocí thread:sent</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::send id ?skript?</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pøi -async se neèeká na dokonèení skriptu</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::send id ?skript? promìnná_s_výsledkem</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- lze specifikovat jméno promìnné pro ulo¾ení výsledku</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::broadcast id ?skript?</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- po¹le skript do v¹ech vláken, neèeká na dokonèení</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::join id</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- èeká na dokonèení vlákna id a vrátí jeho výsledek</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Demonstraèní pøíklad</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- pou¾ití thread::create a thread:send</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set t1 [thread::create]</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set t2 [thread::create] </font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::send -async $t1 &quot;set a 1&quot; result</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::send -async $t2 &quot;set b 2&quot; result </font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# èekání na dokonèení obou vláken</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# není zaruèeno poøadí dokonèení</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for {set i 0} {$i &lt; 2} {incr i} {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vwait result</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Mutexy (synchronizaèní mechanismus)</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::mutex create</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::mutex destroy mutex</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::mutex lock mutex</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread::mutex unlock mutex</font><br>
<br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">=================== 12. Jmenné prostory&nbsp;&nbsp;&nbsp;&nbsp; ===================</font><br>
<font color="#006400">Jmenné prostory</font><br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Jeden ze zpùsobù organizace zdrojových kódù</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- zmen¹ení poètu globálních promìnných</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- zmen¹ení poètu globálních procedur</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; men¹í pravdìpodobnost konfliktu jmen (napø. pøepis globální promìnné)</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Identifikátor jmenného prostoru se zapisuje pøed proceduru/promìnnou</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$jmenný_prostor::promìnná</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jmenný_prostor::procedura()</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Jmenné prostory lze uspoøádat hierarchicky</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$jmenný_prostor::jmenný_prostor::promìnná</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jmenný_prostor::jmenný_prostor::procedura()</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Globální jmenný prostor</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot; - prázdný øetìzec</font><br>
<font color="#006400">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:: - synonymum</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Mnohé balíèky vytváøí vlastní jmenný prostor</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- viz thread::create atd.</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Vytvoøení nového jmenného prostoru</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace eval Counter {</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace export increment_variable</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variable num 0</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proc increment_variable {} {</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variable num</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;incr num</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
<br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace eval ::tcl::clock \</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[list variable LibDir [file dirname [info script]]]</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace eval ::tcl::clock {</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Export the subcommands</font><br>
<br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace export format</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace export clicks</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace export microseconds</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace export milliseconds</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace export scan</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace export seconds</font><br>
<font color="#bbbb00">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;namespace export add</font><br>
<br>
<font color="#ff0000">&nbsp;&nbsp;&nbsp;&nbsp;* Pøístup k procedurám a promìnným ve jmenném prostoru</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Counter::bump 5</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Counter::Reset</font><br>
<font color="#0000ff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts $Counter::num</font><br>
<br>
<font color="#006400">_______________________________________________________________</font><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<font color="#006400">_</font><br>
</font></body>
</html>
